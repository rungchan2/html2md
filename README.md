# PRD: html2md

## 1. 제품 개요

### 1.1 제품명
**html2md**

### 1.2 문제 정의
개발자들이 공식 문서나 웹페이지 내용을 Claude Code나 다른 AI 도구에 입력할 때, 매번 수동으로 복사하거나 마크다운 변환 작업을 해야 하는 번거로움이 있음. 일부 사이트만 마크다운 내보내기를 지원하고, 대부분은 지원하지 않음.

### 1.3 솔루션
웹페이지의 원하는 섹션을 시각적으로 선택하여 마크다운으로 자동 변환 후 복사/다운로드할 수 있는 Chrome Extension

### 1.4 타겟 사용자
- AI 도구(Claude, ChatGPT 등)와 함께 작업하는 개발자
- 기술 문서를 자주 참조하는 개발자
- 웹 콘텐츠를 마크다운으로 아카이빙하는 사용자

---

## 2. 핵심 기능

### 2.1 선택 모드 활성화
| 항목 | 내용 |
|------|------|
| 활성화 방법 | Extension 아이콘 클릭 또는 `Cmd+Shift+M` |
| 비활성화 | `ESC` 키 또는 아이콘 재클릭 |
| 시각적 피드백 | 커서 변경 + 화면 상단 안내 바 표시 |

### 2.2 섹션 선택
| 기능 | 동작 |
|------|------|
| Hover 하이라이트 | 마우스 오버 시 해당 DOM 요소에 반투명 오버레이 + 테두리 |
| 단일 선택 | 클릭으로 섹션 선택 |
| 다중 선택 | `Shift+클릭`으로 여러 섹션 추가 선택 |
| 선택 범위 조절 | `Shift+↑` 부모 요소로 확장 / `Shift+↓` 자식 요소로 축소 |
| 선택 해제 | 선택된 요소 재클릭 시 해제 |

### 2.3 마크다운 변환
**지원 요소:**
- 헤딩 (h1~h6) → `#` ~ `######`
- 리스트 (ul/ol) → `-` / `1.`
- 코드블록 → ` ``` ` + 언어 자동 감지
- 인라인 코드 → `` ` ``
- 테이블 → 마크다운 테이블 문법
- 링크 → `[text](url)`
- 이미지 → `![alt](url)` (URL만 포함)
- 볼드/이탤릭 → `**text**` / `*text*`
- 인용구 → `>`

### 2.4 내보내기
선택 완료 후 팝업 UI 표시:

| 옵션 | 동작 |
|------|------|
| 📋 클립보드 복사 | 변환된 마크다운을 클립보드에 복사 |
| 💾 파일 다운로드 | `.md` 파일로 저장 |

**파일명 규칙:** `{페이지 메타 타이틀}_{YYYYMMDD}.md`
- 예: `React_Documentation_20250611.md`
- 특수문자는 `_`로 치환

---

## 3. 사용자 플로우

```
┌─────────────────────────────────────────────────────────┐
│  Cmd+Shift+M 또는 아이콘 클릭                            │
└─────────────────────────────────────────────────────────┘
                          ↓
┌─────────────────────────────────────────────────────────┐
│  선택 모드 활성화                                        │
│  - 상단에 안내 바 표시: "섹션을 선택하세요 (ESC로 취소)" │
│  - 커서 변경 (crosshair)                                │
└─────────────────────────────────────────────────────────┘
                          ↓
┌─────────────────────────────────────────────────────────┐
│  Hover → 섹션 하이라이트                                 │
│  - Shift+↑/↓ 로 범위 조절 가능                          │
└─────────────────────────────────────────────────────────┘
                          ↓
┌─────────────────────────────────────────────────────────┐
│  클릭 → 섹션 선택 (파란색 테두리로 확정 표시)            │
│  - Shift+클릭으로 다중 선택 가능                        │
└─────────────────────────────────────────────────────────┘
                          ↓
┌─────────────────────────────────────────────────────────┐
│  옵션 팝업 표시                                          │
│  ┌────────────┐  ┌────────────┐                        │
│  │  📋 복사   │  │  💾 다운로드 │                        │
│  └────────────┘  └────────────┘                        │
└─────────────────────────────────────────────────────────┘
                          ↓
┌─────────────────────────────────────────────────────────┐
│  완료 → 토스트 알림 "복사되었습니다" / "다운로드 완료"   │
└─────────────────────────────────────────────────────────┘
```

---

## 4. 단축키 정리

| 단축키 | 동작 |
|--------|------|
| `Cmd+Shift+M` | 선택 모드 진입/종료 토글 |
| `ESC` | 선택 모드 종료 |
| `Shift+클릭` | 다중 선택 |
| `Shift+↑` | 부모 요소로 선택 범위 확장 |
| `Shift+↓` | 자식 요소로 선택 범위 축소 |

---

## 5. UI/UX 상세

### 5.1 하이라이트 스타일
```css
/* Hover 상태 */
outline: 2px dashed #3B82F6;
background: rgba(59, 130, 246, 0.1);

/* 선택 확정 상태 */
outline: 2px solid #3B82F6;
background: rgba(59, 130, 246, 0.15);
```

### 5.2 안내 바 (선택 모드 시)
- 화면 상단 고정
- 반투명 다크 배경
- 텍스트: "섹션을 선택하세요 | Shift+클릭: 다중선택 | Shift+↑↓: 범위조절 | ESC: 취소"

### 5.3 옵션 팝업
- 선택된 영역 근처에 플로팅으로 표시
- 두 개의 버튼: 복사 / 다운로드
- 클릭 외부 영역 클릭 시 닫힘

### 5.4 토스트 알림
- 우하단에 2초간 표시 후 fade out
- 성공: 초록색 / 실패: 빨간색

---

## 6. 기술 스펙

### 6.1 Extension 구조
```
markdown-grabber/
├── manifest.json        # Extension 설정 (Manifest V3)
├── background.js        # 서비스 워커
├── content.js           # 페이지 주입 스크립트
├── content.css          # 하이라이트 스타일
├── popup.html           # 팝업 UI (옵션)
├── popup.js
├── lib/
│   └── turndown.js      # HTML→MD 변환 라이브러리
└── icons/
    ├── icon16.png
    ├── icon48.png
    └── icon128.png
```

### 6.2 핵심 의존성
- **Turndown.js**: HTML to Markdown 변환
- **Turndown Plugin GFM**: 테이블, 취소선 등 GFM 지원

### 6.3 권한
```json
{
  "permissions": ["activeTab", "clipboardWrite", "downloads"],
  "commands": {
    "toggle-selection-mode": {
      "suggested_key": { "default": "Ctrl+Shift+M", "mac": "Command+Shift+M" },
      "description": "선택 모드 토글"
    }
  }
}
```

---

## 7. 향후 확장 고려사항 (v2)

- [ ] 선택 영역 미리보기 (변환된 마크다운 확인)
- [ ] 사용자 정의 변환 규칙 설정
- [ ] 자주 사용하는 사이트별 프리셋
- [ ] 전체 페이지 변환 옵션
- [ ] 히스토리 기능 (최근 변환 목록)

---

## 8. 성공 지표

- 선택 모드 진입 → 내보내기 완료까지 평균 3클릭 이내
- 마크다운 변환 정확도 95% 이상 (주요 기술 문서 사이트 기준)
- 사용자가 수동 수정 없이 바로 사용 가능한 마크다운 출력

---

이 PRD로 개발 진행할까요? 아니면 수정하거나 추가할 내용이 있으면 말씀해주세요!